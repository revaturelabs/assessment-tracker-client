let onHome = onPage,
	onBatch = offPage,
	onAssess = offPage,
	onNotes = offPage;
function caller() {
	let a = base_url + "user",
		b = "loadResult";
	ajaxCaller("PATCH", a, caller_complete, b, b, "");
}
function caller_complete(a, b, c) {
	200 == a
		? (document.getElementById(c).innerHTML = b)
		: 201 == a
		? (document.getElementById(c).innerHTML = JSON.parse(b))
		: 400 == a && (document.getElementById(c).innerHTML = b);
}
function loadBatchesbyYear(a) {
	let b = base_url + ("trainers/years/" + a);
	ajaxCaller(
		"GET",
		b,
		loadBatchesbyYear_complete,
		"yearsWorked",
		"batchLoader",
		""
	);
}
function loadBatchesbyYear_complete(a, b, c) {
	let d = JSON.parse(b);
	(document.getElementById(c).innerHTML = ""),
		200 == a
			? ((batches = d),
			  $.each(batches, (a) => {
					(document.getElementById(c).innerHTML += newBatch(batches[a].year)),
						branchData(
							loginData.id,
							batches[a].year,
							"batch_" + batches[a].year
						);
			  }))
			: 201 == a
			? (document.getElementById(c).innerHTML = JSON.parse(b))
			: 400 == a && (document.getElementById(c).innerHTML = b),
		console.log("jsonHolder"),
		console.log(d);
}
function branchData(a, b, c) {
	let d = base_url + ("batches/" + a + "/" + b);
	ajaxCaller("GET", d, branchData_complete, c, "batchLoader", "");
}
function branchData_complete(a, b, c) {
	let d = JSON.parse(b);
	if (200 == a) {
		batches = d;
		let a = [];
		$.each(batches, (b) => {
			let d = new Date(batches[b].startDate);
			-1 == a.indexOf(d.getUTCMonth())
				? (a.push(d.getUTCMonth()),
				  (document.getElementById(c).innerHTML += newBatchBtn(
						batches[b].trainingTrack + " - " + batches[b].name,
						batches[b].id,
						d.getUTCMonth()
				  )))
				: (document.getElementById(c).innerHTML += newBatchBtn(
						batches[b].trainingTrack + " - " + batches[b].name,
						batches[b].id
				  ));
		});
	} else
		201 == a
			? (document.getElementById(c).innerHTML = JSON.parse(b))
			: 400 == a && (document.getElementById(c).innerHTML = b);
	console.log("batches"), console.log(batches);
}
function pageDataToLoad() {
	$("#mainbody").html(tempMainContentHolder),
		loadinfoByClass(
			"trainerName",
			loginData.first_name + " " + loginData.last_name
		),
		loadBatchesbyYear(loginData.id);
}
function newBatch(a) {
	return `<div id="batch_${a}" class="d-flex-inline-block flex-fill p-4 mr-2 my-2 bg-darker border border-dark">
    <h4 class="card-title">${a}</h4>
    <hr class="bg-light" />
    </div>`;
}
function newBatchBtn(a, b, c) {
	return c
		? `
        <h6 class="card-title">${months[c]}</h6>
        <button onclick="goToPage('batch?batchID='+${b})" class="d-inline-block my-2 btn btn-light text-primary border border-dark bg-darker p-1 rounded">${a}</button>
        `
		: `
        <button onclick="goToPage('batch?batchID='+${b})" class="d-inline-block my-2 btn btn-light text-primary border border-dark bg-darker p-1 rounded">${a}</button>
        `;
}
